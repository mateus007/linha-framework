{"version":3,"file":"carousel.js.map","sources":["../../../src/framework/carousel/carousel.ts"],"sourcesContent":["var Carousel = {\n\n    /**\n     * User event watcher\n     * @var {boolean}\n     */\n    userEvent: true,\n\n    /**\n     * Init carousel\n     * @return {void}\n     */\n    init: function(): void{\n\n        var self = this;\n        var timer = null;\n        var parent = null;\n\n        document.addEventListener('click', function(e){\n\n            var next = (<HTMLElement>e.target).closest('.next');\n            var previous = (<HTMLElement>e.target).closest('.previous');\n            var element = (<HTMLElement>e.target).closest('.carousel');\n\n            if( next && element ){\n                e.preventDefault();\n                self.move(element, 'next');\n            }\n            if( previous && element ){\n                e.preventDefault();\n                self.move(element, 'previous');\n            }\n\n        });\n\n        document.addEventListener('scroll', function(e){\n\n            if( !self.userEvent || e.target === document ){\n                return;\n            }\n\n            var scroll = (<HTMLElement>e.target).closest('.scroll');\n\n            if( !scroll ){\n                return;\n            }\n\n            parent = scroll.closest('.carousel');\n\n            if( timer ){\n                window.clearInterval(timer);\n            }\n\n            timer = window.setTimeout(function(){\n                self.move(parent, 'current');\n            }, 100);\n\n        }, true);\n\n        window.addEventListener('resize', function(){\n\n            var items = document.querySelectorAll('.carousel');\n\n            [].forEach.call(items, function(item: Element){\n                self.move(item, 'current');\n            });\n\n        });\n\n    },\n\n    /**\n     * Scroll carousel element to given position\n     * @param {Element} element\n     * @param {String} direction\n     * @return {void}\n     */\n    move: function(element: Element, direction: string): void{\n\n        var scroll = element.querySelector('.scroll');\n        var items = element.querySelectorAll('.item');\n\n        if( !items.length ){\n            return;\n        }\n\n        var itemWidth = (<HTMLElement>items[0]).offsetWidth;\n\n        var perPage = scroll.clientWidth / itemWidth;\n            perPage = Math.round(perPage);\n\n        var current = (scroll.scrollLeft / itemWidth) + 1;\n            current = Math.round(current);\n\n        var count = items.length;\n        var append = count % perPage;\n        var next: number;\n\n        // Next\n        if( direction == 'next' ){\n\n            next = current + perPage;\n\n            if( !append && next > count ){\n                next = 1;\n\n            }else if( append && next >= count ){\n\n                if( current + append < count ){\n                    next = current + append;\n                }else{\n                    next = 1;\n                }\n\n            }\n\n        // Previous\n        }else if( direction == 'previous' ){\n\n            next = current - perPage;\n\n            if( !append && next <= 0 ){\n                next = count;\n\n            }else if( append && next <= 0 ){\n\n                if( current - append > 0 ){\n                    next = current - append;\n                }else{\n                    next = count;\n                }\n\n            }\n\n        // Current\n        }else{\n            next = current;\n        }\n\n        this.userEvent = false;\n        scroll.scrollLeft = (next - 1) * itemWidth;\n        this.userEvent = true;\n\n    }\n\n};\n\nCarousel.init();"],"names":["Carousel","userEvent","init","parent","self","this","timer","document","addEventListener","e","next","target","closest","previous","element","preventDefault","move","scroll","window","clearInterval","setTimeout","items","querySelectorAll","forEach","call","item","direction","itemWidth","perPage","current","querySelector","length","offsetWidth","clientWidth","Math","round","scrollLeft","append","count"],"mappings":"AAAA,IAAIA,SAAW,CAMXC,WAAW,EAMXC,KAAM,WAEF,IAEIC,OAFAC,KAAOC,KACPC,MAAQ,KAGZC,SAASC,iBAAiB,QAAS,SAASC,GAExC,IAAIC,KAAqBD,EAAEE,OAAQC,QAAQ,SACvCC,SAAyBJ,EAAEE,OAAQC,QAAQ,aAC3CE,QAAwBL,EAAEE,OAAQC,QAAQ,aAE1CF,MAAQI,UACRL,EAAEM,iBACFX,KAAKY,KAAKF,QAAS,SAEnBD,UAAYC,UACZL,EAAEM,iBACFX,KAAKY,KAAKF,QAAS,eAK3BP,SAASC,iBAAiB,SAAU,SAASC,SAEpCL,KAAKH,WAAaQ,OAAEE,SAAWJ,WAIhCU,OAAuBR,OAAEE,OAAQC,QAAQ,cAM7CT,OAASc,OAAOL,QAAQ,aAEpBN,OACAY,OAAOC,cAAcb,OAGzBA,MAAQY,OAAOE,WAAW,WACtBhB,KAAKY,KAAKb,OAAQ,YACnB,QAEJ,GAEHe,OAAOV,iBAAiB,SAAU,WAE9B,IAAIa,MAAQd,SAASe,iBAAiB,aAEtC,GAAGC,QAAQC,KAAKH,MAAO,SAASI,MAC5BrB,KAAKY,KAAKS,KAAM,gBAa5BT,KAAM,SAASF,MAAkBY,WAE7B,IAOIC,UAGAC,QAGAC,QAIAnB,KAjBAO,OAASH,MAAQgB,cAAc,WAC/BT,OAAQP,MAAQQ,iBAAiB,SAEhCD,OAAMU,SAIPJ,UAA0BN,OAAM,GAAIW,YAEpCJ,QAAUX,OAAOgB,YAAcN,UAC/BC,QAAUM,KAAKC,MAAMP,SAErBC,QAAWZ,OAAOmB,WAAaT,UAAa,EAC5CE,QAAUK,KAAKC,MAAMN,SAGrBQ,QADAC,MAAQjB,OAAMU,QACGH,QAIJ,QAAbF,WAEAhB,KAAOmB,QAAUD,SAEZS,QAAiBC,MAAP5B,KACXA,KAAO,EAED2B,QAAkBC,OAAR5B,OAGZA,KADAmB,QAAUQ,OAASC,MACZT,QAAUQ,OAEV,IAMI,YAAbX,WAENhB,KAAOmB,QAAUD,SAEZS,QAAU3B,MAAQ,EACnBA,KAAO4B,MAEDD,QAAU3B,MAAQ,IAGpBA,KADmB,EAAnBmB,QAAUQ,OACHR,QAAUQ,OAEVC,QAOf5B,KAAOmB,QAGXxB,KAAKJ,WAAY,EACjBgB,OAAOmB,YAAc1B,KAAO,GAAKiB,UACjCtB,KAAKJ,WAAY,KAMzBD,SAASE"}